<!DOCTYPE html>

<!-- thymeleaf 설정 -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="">
        <meta name="description" content="">
        
        <!-- 희망 견적서 상세보기 -->
        <title> 희망 견적서 상세보기 </title>

        <!-- CSS -->
        <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
        <link rel="stylesheet" th:href="@{/css/all.min.css}">
        <link rel="stylesheet" th:href="@{/css/animate.min.css}">
        <link rel="stylesheet" th:href="@{/css/YTPlayer.min.css}">
        <link rel="stylesheet" th:href="@{/css/slick.css}">
        <link rel="stylesheet" th:href="@{/css/structure.css}">
        <link rel="stylesheet" th:href="@{/css/main.css}"> 
        <link rel="stylesheet" th:href="@{/css/responsive.css}">
        
        <!-- font -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:100,300,400,500,600,700,800,900" rel="stylesheet">
		<link rel="preconnect" href="https://fonts.googleapis.com">
	   	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
		
        <!-- icons -->
        <link rel="icon" th:href="@{/images/ico/favicon.ico}">  
        <link rel="apple-touch-icon" sizes="144x144" th:href="@{/images/ico/apple-touch-icon-precomposed.png}">
        <link rel="apple-touch-icon" sizes="114x114" th:href="@{/images/ico/apple-touch-icon-114-precomposed.png}">
        <link rel="apple-touch-icon" sizes="72x72" th:href="@{/images/ico/apple-touch-icon-72-precomposed.png}">
        <link rel="apple-touch-icon" sizes="57x57" th:href="@{/images/ico/apple-touch-icon-57-precomposed.png}">   
        <!-- icons -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <!-- Template Developed By ChtStudio -->
        
        <!-- header css -->
		<link rel="stylesheet" th:href="@{/css/sections/header.css}">
        
        <!-- 퀵메뉴바 css -->
		<link rel="stylesheet" th:href="@{/css/nav.css}">
        
        <!-- 개인 css 파일 링크 -->
        <link rel="stylesheet" th:href="@{/css/jy/jy.css}">
        
        
        
    </head>
    <body> 
        <div id="preloader">
            <img th:src="@{/images/preloader.gif}" alt="Image" class="tr-preloader img-fluid">
        </div><!-- preloader -->
        
        <!-- 헤더 -->
        <div th:replace="sections/header :: header"></div>
        <!-- 헤더 끝 -->  

        <section class="breadcrumb-section">
            <div class="container" style="padding-top:30px; padding-bottom:30px;">
                <h1>견적 희망서 상세보기</h1>
                <p>상담 신청한 견적서를 볼 수 있어요.</p>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a th:href="@{/index.html}">Home</a></li>
                    <li class="breadcrumb-item">Details</li>
                </ol>
            </div><!-- /.container -->
        </section><!-- /.breadcrumb-section -->  

            <div class="section-content course-details bg-white section-padding">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-8" style="float: none; margin:0 auto;"> <!--가운데 정렬-->
                            <div class="sa-course">
								<form action="">
                                <div class="course-info" th:each="details:${Details}">
                                    <h2 class="title" id="estimate_title">희망 견적서 상세보기</h2>
                                    <input type="hidden" name="eid" class="eid" th:value="${details.eid}">
                                    <input type="hidden" name="mid" class="mid" th:value="${details.member.id}">
                                    <input type="hidden" name="cid" class="cid" th:value="${session.userId}">
                                    <input type="hidden" name="cname" class="cname" th:value="${session.companyName}">
                                    <p><span class="bold">공간 유형  :</span> <span th:text="${details.space}"></span></p>
                                    <p><span class="bold">건물 유형 :</span> <span th:text="${details.building}"></span></p>
                                    <p><span class="bold">평수 :</span> <span th:text="${details.size}"></span>평</p>
                                    <p><span class="bold">예산 :</span> <span th:text="${details.budget}"></span>만원</p>
                                    <p><span class="bold">희망시공일정 :</span> <span th:text="${details.startDay}"></span> ~ <span th:text="${details.endDay}"></span></p>
                                    <p><span class="bold">주소 :</span> <span th:text="${details.eaddr}"></span></p>
                                    <p><span class="bold">상담인 :</span> <span th:text="${details.ename}"></span></p>
                                    <p><span class="bold">핸드폰 번호 :</span> <span th:text="${details.etel}"></span></p>
                                    <p><span class="bold">원하는 스타일 :</span></p>
                                    <p><span th:text="${details.estyle}"></span></p>
                                    <p><span th:text="${details.edate}"></span></p>

                                </div>
                                </form>
                            </div><!-- /.sa-course -->  
                            
                            <div class="warning_div">
                                <input class="warning_check" type="checkbox"> <strong class="warning">해당 고객의 정보를 오용할 경우 법적 제제를 받을 수 있습니다.(필수)</strong>
                            </div>
                            
                            <div class="btn_div">
                                <button class="btn btn-primary decision_btn_CD">요청하기</button>
                                <button class="btn btn-primary chat_btn">채팅하기</button>
                            </div>
                        
                        </div>
    
                    </div><!-- /.row -->
                </div><!-- /.container -->
            </div><!-- /.section-content -->
       
        <!-- 푸터 -->
        <div th:replace="sections/footer :: footer"></div>
		<!-- 푸터 끝 -->
		
		<!-- 퀵메뉴바 -->
		<div th:replace="sections/nav :: div"></div>
		
        <!-- JS -->
        <script th:src="@{/js/jquery.min.js}"></script>
        <script th:src="@{/js/popper.min.js}"></script>
        <script th:src="@{/js/bootstrap.min.js}"></script>  
        <script th:src="@{/js/inview.min.js}"></script> 
        <script th:src="@{/js/slick.min.js}"></script>
        <script th:src="@{/js/jquery-ui-min.js}"></script>  
        <script th:src="@{/js/jarallax.min.js}"></script>  
        <script th:src="@{/js/counterup.min.js}"></script> 
        <script th:src="@{/js/waypoints.min.js}"></script> 
        <script th:src="@{/js/YTPlayer.min.js}"></script> 
        <script th:src="@{/js/jquery-ui-min.js}"></script>
        <script th:src="@{/js/validate.js}"></script>
        <script th:src="@{/js/main.js}"></script>
        
        <!-- header js -->
		<script th:src="@{/js/sections/header.js}"></script>
		
		<!-- 퀵메뉴 js -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.0/sockjs.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
		<script th:src="@{/chatbotjs/app.js}" charset="UTF-8"></script>
		
        <!-- 개인 js 스크립트 -->
        <!-- <script th:src="@{/js/jy/estDetails.js}"></script> -->
        <script th:src="@{/js/ye/ye.js}"></script>
        
        <script type="text/javascript">

      	//기본 이벤트 비활성화
		//e.preventDefault();
      	/* esti_request데이터베이스에 세션의 id와 견적 id가 존재하다면 버튼 css/확정요청완료 버튼 변경 */
        $.ajax({
			type:'get',
			url:'/estimation/getEstiReq',
			data:{eid:$('.eid').val(),cid:$('.cid').val()},
			contentType : 'applicaton/x-www-form-urlencoded;charset=utf-8',
			success:function(result){
				console.log('성공');
				let decisionBtn=$(".decision_btn_CD");
				//확정요청불가일때 css변경
				if($.trim(result)=="확정요청불가"){
					console.log(result);
					decisionBtn.text("확정요청불가");
					decisionBtn.addClass("nothover_btn");
					decisionBtn.attr("id","nothover_btn");
					
				//확정요청완료일때 css변경
				}else if ($.trim(result)=="확정요청완료"){
					console.log(result);
					decisionBtn.text("확정요청완료");
					decisionBtn.addClass("nothover_btn");
					decisionBtn.attr("id","nothover_btn");
					
				//확정요청하기일때 기본css
				}else if ($.trim(result)=="확정요청하기"){
					console.log(result);
				}
			},
			error : function(err) {
				//실패했을 때
    			alert('실패 : 현재 고객아이디 로그인 중, 업체 아이디로 로그인 필요');
    			console.log(err);
    		}
		})//ajax
        </script>
            
    </body>
</html>        